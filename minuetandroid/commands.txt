#Step 1 check list for the list of libraries installed
ndk 
sdk
ant
java(open jdk)

#Step 2 you need to have all these libraries else follow the instructions given on kde -->building kf5 for android
cd /home/ayush/android #(this was my path to keep it along with ndk and sdk)
git clone git://anongit.kde.org/scratch/cordlandwehr/kdesrc-conf-android.git  
mkdir -p extragear/kdesrc-build  
git clone git://anongit.kde.org/kdesrc-build extragear/kdesrc-build  
ln -s extragear/kdesrc-build/kdesrc-build kdesrc-build  
ln -s kdesrc-conf-android/kdesrc-buildrc kdesrc-buildrc

#Step 3 Now open the kdesrc-buildrc file in any text editor and change the following lines:
line 15: -DCMAKE_PREFIX_PATH= "path to Qt5 Android libraries. Example: /home/ayush/Qt5.5/5.5/android_armv7"
 

#Step 4 setting up the commands either put it in terminal or ~bashrc
export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk
export ANT=/usr/bin/ant
export Qt5_android=/home/ayush/Qt5.5.1/5.5/android_armv7
export ANDROID_SDK_ROOT=/home/ayush/android/android-sdk-linux/
export PATH=$ANDROID_SDK_ROOT/platform-tools/:$PATH
export ANDROID_NDK=/home/ayush/android/android-ndk-r10e/

#Step 5 once done run the script
 ./kdesrc-build libintl-lite extra-cmake-modules frameworks-android  
#note you migh need to be a sudo user for it. 
#if you become a sudo operator, you might have to do the step 4 again

#for creating the applicaiton start from step 6 to end
#be in the home directory of minuet Example /home/ayush/minuet
#Step 6 creating directories
export minuetandroid_DIR=`pwd`
mkdir -p export
cd export/
export minuetandroid_PRODUCT_DIR=`pwd`

#not needed any more
#mkdir -p ../../build/minuetandroid
#cd ../../build/minuetandroid


#Step 7 cmake commands
    cmake "${minuetandroid_DIR}" -DCMAKE_TOOLCHAIN_FILE=/usr/share/ECM/toolchain/Android.cmake \
        -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_PREFIX_PATH="${Qt5_android}" \
        -DCMAKE_INSTALL_PREFIX="${minuetandroid_PRODUCT_DIR}" \
        -DQTANDROID_EXPORTED_TARGET=minuetandroid \
        -DANDROID_APK_DIR="${minuetandroid_DIR}"/minuetandroid/data \
	-DKF5I18n_DIR=/opt/android/kde/install/lib/cmake/KF5I18n/ 
#	-DKF5Config_DIR=/opt/android/kde/install/lib/cmake/KF5Config/ \	
#     	-DKF5_HOST_TOOLING=/opt/android/kde/install/lib/cmake/KF5Config/

#step 8
make install/strip
    

#mkdir "${minuetandroid_PRODUCT_DIR}"/share

#Step 9 Compulsory to run the following command else you will get an error . Ecm expects us to have a directory
mkdir -p "${minuetandroid_PRODUCT_DIR}"/lib/qml

#Step 10 will create an apk
make create-apk-minuetandroid

#Step 11 install it on your phone ... Android to be specific :P
adb install -r minuetandroid_build_apk/bin/QtApp-debug.apk

#now you have a simple android application using cmake.... enjoy :)
